[gd_scene load_steps=62 format=3 uid="uid://77ecksixfpeo"]

[ext_resource type="Script" path="res://Scripts/player.gd" id="1_qm5xk"]
[ext_resource type="Resource" uid="uid://bwokjx3lenypg" path="res://Resources/inventory.tres" id="2_dulbo"]
[ext_resource type="Texture2D" uid="uid://bke3m4icrarhg" path="res://images/JIMIDLESPRITESHEET.png" id="3_w2qoj"]
[ext_resource type="Texture2D" uid="uid://ibturv6yjl8p" path="res://images/JIMWALKSPRITESHEET.png" id="4_py2r5"]
[ext_resource type="Texture2D" uid="uid://cxyuu1igo7us8" path="res://images/right-facing slashframes.png" id="5_lkyq1"]
[ext_resource type="Texture2D" uid="uid://b060akbuv0brt" path="res://images/health bar sprite empty.png" id="6_0nipb"]
[ext_resource type="Texture2D" uid="uid://c02idvqeq8oia" path="res://images/empty.png" id="6_ujg8o"]
[ext_resource type="Texture2D" uid="uid://b8wh2s4xu68y7" path="res://images/SingleRow.png" id="7_ipwff"]
[ext_resource type="PackedScene" uid="uid://c65b4rqdkx1su" path="res://Scenes/generic_dialogue.tscn" id="9_l0wpm"]
[ext_resource type="Script" path="res://addons/dialogue_manager/dialogue_manager.gd" id="10_3ehms"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jal5q"]
size = Vector2(52, 70)

[sub_resource type="AtlasTexture" id="AtlasTexture_ldc7u"]
atlas = ExtResource("3_w2qoj")
region = Rect2(0, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_cv1aa"]
atlas = ExtResource("3_w2qoj")
region = Rect2(256, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_wemg5"]
atlas = ExtResource("3_w2qoj")
region = Rect2(128, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_6wa2h"]
atlas = ExtResource("3_w2qoj")
region = Rect2(0, 128, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_17eci"]
atlas = ExtResource("4_py2r5")
region = Rect2(0, 0, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_doym2"]
atlas = ExtResource("4_py2r5")
region = Rect2(84, 0, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_rq56j"]
atlas = ExtResource("4_py2r5")
region = Rect2(168, 0, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_2kgje"]
atlas = ExtResource("4_py2r5")
region = Rect2(252, 0, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_gturi"]
atlas = ExtResource("4_py2r5")
region = Rect2(336, 0, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_iujx3"]
atlas = ExtResource("4_py2r5")
region = Rect2(420, 0, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_e7f1q"]
atlas = ExtResource("4_py2r5")
region = Rect2(0, 128, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_pjid5"]
atlas = ExtResource("4_py2r5")
region = Rect2(84, 128, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_3wwbp"]
atlas = ExtResource("4_py2r5")
region = Rect2(336, 256, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_iifwm"]
atlas = ExtResource("4_py2r5")
region = Rect2(420, 256, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_o5ywc"]
atlas = ExtResource("4_py2r5")
region = Rect2(0, 384, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_v2vkt"]
atlas = ExtResource("4_py2r5")
region = Rect2(84, 384, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_r6cm8"]
atlas = ExtResource("4_py2r5")
region = Rect2(168, 384, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_a0cpt"]
atlas = ExtResource("4_py2r5")
region = Rect2(252, 384, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_16g5j"]
atlas = ExtResource("4_py2r5")
region = Rect2(336, 384, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_mb3vg"]
atlas = ExtResource("4_py2r5")
region = Rect2(420, 384, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_t2ou6"]
atlas = ExtResource("4_py2r5")
region = Rect2(168, 128, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_p5ie2"]
atlas = ExtResource("4_py2r5")
region = Rect2(252, 128, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_owbjs"]
atlas = ExtResource("4_py2r5")
region = Rect2(336, 128, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_1ufi8"]
atlas = ExtResource("4_py2r5")
region = Rect2(420, 128, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_dwo3b"]
atlas = ExtResource("4_py2r5")
region = Rect2(0, 256, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_kdlkj"]
atlas = ExtResource("4_py2r5")
region = Rect2(84, 256, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_iv25e"]
atlas = ExtResource("4_py2r5")
region = Rect2(168, 256, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_0j1bh"]
atlas = ExtResource("4_py2r5")
region = Rect2(252, 256, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_ljj3b"]
atlas = ExtResource("4_py2r5")
region = Rect2(0, 512, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_44yts"]
atlas = ExtResource("4_py2r5")
region = Rect2(84, 512, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_i0pib"]
atlas = ExtResource("4_py2r5")
region = Rect2(168, 512, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_e3grl"]
atlas = ExtResource("4_py2r5")
region = Rect2(252, 512, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_2hx2u"]
atlas = ExtResource("4_py2r5")
region = Rect2(336, 512, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_e7thv"]
atlas = ExtResource("4_py2r5")
region = Rect2(420, 512, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_6roj0"]
atlas = ExtResource("4_py2r5")
region = Rect2(0, 640, 84, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_154nb"]
atlas = ExtResource("4_py2r5")
region = Rect2(84, 640, 84, 128)

[sub_resource type="SpriteFrames" id="SpriteFrames_6qceo"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ldc7u")
}],
"loop": true,
"name": &"stand_down",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_cv1aa")
}],
"loop": true,
"name": &"stand_left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_wemg5")
}],
"loop": true,
"name": &"stand_right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_6wa2h")
}],
"loop": true,
"name": &"stand_up",
"speed": 5.0
}, {
"frames": [{
"duration": 0.6,
"texture": SubResource("AtlasTexture_17eci")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_doym2")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_rq56j")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_2kgje")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_gturi")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_iujx3")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_e7f1q")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_pjid5")
}],
"loop": true,
"name": &"walk_down",
"speed": 5.0
}, {
"frames": [{
"duration": 0.6,
"texture": SubResource("AtlasTexture_3wwbp")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_iifwm")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_o5ywc")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_v2vkt")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_r6cm8")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_a0cpt")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_16g5j")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_mb3vg")
}],
"loop": true,
"name": &"walk_left",
"speed": 5.0
}, {
"frames": [{
"duration": 0.6,
"texture": SubResource("AtlasTexture_t2ou6")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_p5ie2")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_owbjs")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_1ufi8")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_dwo3b")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_kdlkj")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_iv25e")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_0j1bh")
}],
"loop": true,
"name": &"walk_right",
"speed": 5.0
}, {
"frames": [{
"duration": 0.6,
"texture": SubResource("AtlasTexture_ljj3b")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_44yts")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_i0pib")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_e3grl")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_2hx2u")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_e7thv")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_6roj0")
}, {
"duration": 0.6,
"texture": SubResource("AtlasTexture_154nb")
}],
"loop": true,
"name": &"walk_up",
"speed": 5.0
}]

[sub_resource type="AtlasTexture" id="AtlasTexture_cirq7"]
atlas = ExtResource("5_lkyq1")
region = Rect2(0, 0, 111, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_phyf4"]
atlas = ExtResource("5_lkyq1")
region = Rect2(111, 0, 111, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_dl405"]
atlas = ExtResource("5_lkyq1")
region = Rect2(222, 0, 111, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_37ttl"]
atlas = ExtResource("5_lkyq1")
region = Rect2(111, 65, 111, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_o3mn8"]
atlas = ExtResource("5_lkyq1")
region = Rect2(0, 65, 111, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_dsaf8"]
atlas = ExtResource("5_lkyq1")
region = Rect2(0, 0, 111, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_47jwp"]
atlas = ExtResource("5_lkyq1")
region = Rect2(111, 0, 111, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_88dys"]
atlas = ExtResource("5_lkyq1")
region = Rect2(222, 0, 111, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_ww18k"]
atlas = ExtResource("5_lkyq1")
region = Rect2(0, 65, 111, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_cpkxy"]
atlas = ExtResource("5_lkyq1")
region = Rect2(111, 65, 111, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_sim4g"]
atlas = ExtResource("5_lkyq1")
region = Rect2(222, 65, 111, 65)

[sub_resource type="SpriteFrames" id="SpriteFrames_tokwd"]
animations = [{
"frames": [{
"duration": 0.3,
"texture": SubResource("AtlasTexture_cirq7")
}, {
"duration": 0.3,
"texture": SubResource("AtlasTexture_phyf4")
}, {
"duration": 0.3,
"texture": SubResource("AtlasTexture_dl405")
}, {
"duration": 0.3,
"texture": SubResource("AtlasTexture_37ttl")
}, {
"duration": 0.3,
"texture": SubResource("AtlasTexture_o3mn8")
}, {
"duration": 1.0,
"texture": ExtResource("6_ujg8o")
}],
"loop": false,
"name": &"attacking",
"speed": 5.0
}, {
"frames": [{
"duration": 0.3,
"texture": SubResource("AtlasTexture_dsaf8")
}, {
"duration": 0.3,
"texture": SubResource("AtlasTexture_47jwp")
}, {
"duration": 6.0,
"texture": SubResource("AtlasTexture_88dys")
}, {
"duration": 0.3,
"texture": SubResource("AtlasTexture_ww18k")
}, {
"duration": 0.3,
"texture": SubResource("AtlasTexture_cpkxy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sim4g")
}],
"loop": false,
"name": &"attacking_spin",
"speed": 5.0
}, {
"frames": [],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_c1kuj"]
size = Vector2(28, 109)

[node name="Player" type="CharacterBody2D" groups=["Depth_Object", "Player"]]
collision_mask = 3
script = ExtResource("1_qm5xk")
inventory = ExtResource("2_dulbo")

[node name="PlayerCollision" type="CollisionShape2D" parent="."]
position = Vector2(4, 29)
shape = SubResource("RectangleShape2D_jal5q")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_6qceo")
animation = &"walk_right"

[node name="AttackArea" type="Area2D" parent="." groups=["Weapon"]]
position = Vector2(12.75, 1)
collision_mask = 3

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="AttackArea"]
position = Vector2(-12.75, -10)
scale = Vector2(1.5, 1.228)
polygon = PackedVector2Array(73, 10, 73, -10, 60, -30, 35, -40, 14, -24, 0, 0, 14, 24.43, 35, 40, 60, 30)

[node name="AttackSprite" type="AnimatedSprite2D" parent="AttackArea"]
position = Vector2(12.75, -9)
scale = Vector2(2, 2)
sprite_frames = SubResource("SpriteFrames_tokwd")
animation = &"attacking"

[node name="AttackTimer" type="Timer" parent="."]
wait_time = 0.2
one_shot = true

[node name="HealthContainer" type="Sprite2D" parent="."]
z_index = 3
position = Vector2(-3, -73)
scale = Vector2(0.5, 0.5)
texture = ExtResource("6_0nipb")

[node name="HealthBar" type="TextureProgressBar" parent="HealthContainer"]
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 0.941
offset_left = -95.0
offset_top = -15.0
offset_right = -99.0
offset_bottom = -16.994
value = 100.0
texture_progress = ExtResource("7_ipwff")
tint_over = Color(1, 0, 0, 1)

[node name="FootstepTimer" type="Timer" parent="."]
wait_time = 0.5

[node name="DialogueManager" parent="." instance=ExtResource("9_l0wpm")]
script = ExtResource("10_3ehms")

[node name="PoisonTimer" type="Timer" parent="."]

[node name="Stealth" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Stealth"]
position = Vector2(-4, -7.5)
shape = SubResource("RectangleShape2D_c1kuj")

[node name="SpinNode" type="Node2D" parent="."]

[node name="SpinArea" type="Area2D" parent="SpinNode" groups=["Weapon"]]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="SpinNode/SpinArea"]
position = Vector2(0, -7)
scale = Vector2(1.5, 1.228)
polygon = PackedVector2Array(73, 10, 73, -10, 60, -30, 35, -40, 14, -24, 0, 0, 14, 24.43, 35, 40, 60, 30)

[node name="AttackSprite" type="AnimatedSprite2D" parent="SpinNode/SpinArea"]
position = Vector2(12.75, -9)
scale = Vector2(2, 2)
sprite_frames = SubResource("SpriteFrames_tokwd")
animation = &"attacking_spin"

[connection signal="body_entered" from="AttackArea" to="." method="_on_attack_area_body_entered"]
[connection signal="timeout" from="AttackTimer" to="." method="_on_attack_timer_timeout"]
[connection signal="timeout" from="FootstepTimer" to="." method="_on_footstep_timer_timeout"]
[connection signal="timeout" from="PoisonTimer" to="." method="_on_poison_timer_timeout"]
[connection signal="area_entered" from="SpinNode/SpinArea" to="." method="_on_spin_area_area_entered"]
